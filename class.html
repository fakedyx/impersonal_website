<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/class.css">
  <title>Document</title>

</head>

<body>
  <canvas id="canvas"></canvas>
  <div class="bg_img">
    <img src="img/class_relation.png" alt="" id="img">
  </div>
  <div class='ribbon'>
    <a href='./index.html'><span>主页</span></a>
    <a href='./class.html'><span>课程</span></a>
    <a href='./data.html'><span>资料</span></a>
    <a href='./major.html'><span>专业认识</span></a>
    <a href='./plan.html'><span>学业规划</span></a>
</div>







  <script>

    let canvas = document.querySelector('canvas')
    let ctx = canvas.getContext('2d')

    class Xmind {
      constructor(option) {
        this.canvas = document.querySelector(option.id)
        this.ctx = this.canvas.getContext('2d')
        this.data = option.data
        this.lineGutter = option.lineGutter || 20  //行间距
        this.blockGutter = option.blockGutter || 200 // 块间距
        this.type="liab"
        this.b1Width = 200
        this.b2Width = 200
        this.b3Width = 300
        this.liabPadding = 10
        this.len = 100 //连接线长度
        this.lineWidth =10
        this.left = 30
        this.right = 30
        this.top = 60
        this.bottom = 60
        this.red = '#f33'
        this.fontSize = option.fontSize || 20
        this.bgColors = ['#9B8651','#9B8651','#9B8651']
        this.fontColors = ['#f33']
        this.lineColor = option.lineColor || '#629b51'
        this.init()
      }
      init() {
        this.setCanvasWidth()
        this.setCanvasHeight()
        this.setBackground()
        this.darwLiab()
        let height = this.drawProduct()
        this.drawProduct(height)

      }
      setCanvasHeight() {
        let height = this.darwLiab(false)
        this.canvas.height = height
      }
      setCanvasWidth() {
        let width = this.b1Width + this.b2Width + this.b3Width + this.len * 4 + this.lineWidth * 2 + this.left + this.right
        this.canvas.width = width
      }
      setBackground() {
        this.ctx.beginPath()
        this.ctx.fillStyle = "#fff"
        this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)
      }
      darwLiab(isDraw = true) {
        let height = this.top
        let liabs = this.data.dutyData
        let x = this.left + this.b1Width + this.b2Width + this.lineWidth * 2 + this.len * 4
        this.ctx.save()
        let dutyHeight = []
        liabs.forEach((item, index) => {
          this.ctx.save()
          let itemHeight = 0
          let totalHeight = 0
          item.liabsList.forEach((liab, liabINdex) => {
            this.ctx.save()
            let movex = this.left + this.b1Width + this.b2Width + this.lineWidth * 2 + this.len * 4
            this.ctx.translate(movex, height)
            let proNameHeight = this.drawText(liab.proName, 0, 0, this.b3Width, isDraw, item)
            height += proNameHeight + this.lineGutter
            let liabHeight = this.drawText(liab.productLiabNameFormula, 0, proNameHeight + this.lineGutter, this.b3Width, isDraw, item) +10
            height += liabHeight + this.lineGutter

            this.drawXLine(0, (proNameHeight + liabHeight + this.lineGutter) / 2)
            this.ctx.save()
  
            this.ctx.translate(-this.len, (proNameHeight + liabHeight + this.lineGutter) / 2)

            if (liabINdex == 0 || liabINdex == item.liabsList.length - 1) {
              itemHeight += (proNameHeight + liabHeight + this.lineGutter * 2) / 2
            } else {
              itemHeight += proNameHeight + liabHeight + this.lineGutter * 2
            }
            totalHeight += liabHeight + this.lineGutter * 2 + proNameHeight
            if (liabINdex == item.liabsList.length - 1) {
              dutyHeight.push(totalHeight)
            }
            if (item.liabsList.length > 1 && liabINdex == item.liabsList.length - 1) {
              this.drwaYLine(0, -itemHeight, 0, 0)
            }
            this.ctx.restore()
            this.ctx.restore()
          })
          this.ctx.restore()
          this.ctx.save()
          height += this.blockGutter
          let liabX = this.left + this.b1Width + this.lineWidth + this.len * 2
          this.ctx.translate(liabX, this.getPos(dutyHeight, index))
          this.drawXLine(0, 0)
          this.drawXLine(this.b2Width + this.len, 0)
          let dutyNameHeight = this.drawDutyName(item)
          if (index >0) {
            this.drwaYLine(-this.len, -this.calcHeight(dutyHeight,index), -this.len, 0)

          }
          this.ctx.restore()
        })
        this.ctx.restore()
        return height
      }
      calcHeight(arr,index) {
        return (arr[index]+arr[index-1])/2 + this.blockGutter
      }
      drawProduct(height) {
        this.ctx.save()
        if(height) {
          this.ctx.translate(this.left, this.canvas.height / 2 -height/2)

        }
        let productList = this.data.productList
        let arr = []
        let y = 0
        productList.forEach((item, index) => {
          this.ctx.save()
          let product = item.product
          let h1 = this.drawText('计算机科学与技术', 0, 0, this.b1Width, false)
          let h2 = this.drawText('各课程之间的关系', 0, 0, this.b1Width, false)
          let h3 = this.drawText('结构', 0, 0, this.b1Width, false)
          let rectHeight = h1 + h2 + h3 + this.lineGutter * 3 + 15 +10
          arr.push(rectHeight)
          if(height) {
            y += rectHeight + this.blockGutter
            this.ctx.translate(0, index==0?0:y)
            ctx.fillStyle = this.bgColors[index%3]
            ctx.fillRect(0, 0, this.b1Width, rectHeight)
            this.drawText('计算机科学与技术', 10, 0, this.b1Width)
            this.drawText('各课程之间的关系', 10, h1+ + this.lineGutter+10, this.b1Width)
            this.drawText('结构', 10, h1 + h2 + this.lineGutter * 2+10, this.b1Width)
          }

          this.ctx.restore()
        })
        if(height) {
          this.drawXLine(this.b1Width + this.len, height/2)
          this.ctx.restore()

        }
        return this.getSum(arr)
      }
      getSum(arr) {
        let sum = 0
        arr.forEach(item => {
          sum += item
        })
        return sum + (arr.length - 1) * this.blockGutter
      }
      drawDutyName(duty) {
        this.ctx.save()
        let height = this.drawText(duty.liabName, 0, 0, this.b2Width-40, false)
        this.ctx.translate(0, -(height + 20) / 2)
        this.ctx.fillStyle = this.bgColors[0]
        this.ctx.fillRect(0, 0, this.b1Width, height + 20)
        this.drawText(duty.liabName, 10, 5, this.b2Width-40)
        this.ctx.restore()
        return height
      }
      getPos(arr, index) {
        let sum = 0
        arr.forEach((item, i) => {
          if (i == arr.length - 1) {
            sum += item / 2 + this.top
          } else {
            sum += item
          }
        })
        sum += this.blockGutter * (arr.length - 1)
        return sum - 2
      }
      sum(arr, index) {
        return arr.reduce((total, num, idx) => {
          return total + num + this.blockGutter * idx
        }, 0)
      }
      drawXLine(x, y) {
        this.ctx.beginPath()
        this.ctx.lineWidth = this.lineWidth
        this.ctx.strokeStyle = this.lineColor
        this.ctx.moveTo(x, y)
        this.ctx.lineTo(x - this.len - 1, y)
        this.ctx.stroke()
      }
      drwaYLine(x, y, x1, y1) {
        this.ctx.beginPath()
        this.ctx.lineWidth = this.lineWidth
        this.ctx.strokeStyle = this.lineColor
        this.ctx.moveTo(x, y)
        this.ctx.lineTo(x1, y1)
        this.ctx.stroke()
      }
      drawText(text, x, y, w, isDraw = true, item) {
        this.ctx.beginPath()
        var chr = text.split("");
        var temp = "";
        var row = [];
        this.ctx.font = `${this.fontSize}px Arial`;
        this.ctx.fillStyle = "#2d11ce";
        this.ctx.textBaseline = "middle";
        for (var a = 0; a < chr.length; a++) {
          if (this.ctx.measureText(temp).width < w) {
          }
          else {
            row.push(temp);
            temp = "";
          }
          temp += chr[a];
        }

        row.push(temp);
        if (isDraw) {
          for (var b = 0; b < row.length; b++) {
            this.ctx.fillText(row[b], x, y + (b + 1) * this.fontSize);
          }

        }
        return (row.length - 1) * this.lineGutter + row.length * this.fontSize
      }
     
    }

    let data = {
      "productList": [
        {
           "product": {
            "coverage": " ",
            "payPeriod": " ",
            "premInitial": " ",
            "productName": " ",
          }
        },
        
      ],
      "dutyData": [
        {
          "liabName": "数学和基础科学类课程",
          "liabsList": [
            {
              "productLiabNameFormula": "高等数学培养的就是我们的思维能力，是分析问题、解决问题的思维方式。许多实际问题都需要建立数学模型来解决，而我们建立模型的基础就是怎样把实际问题转化为数学问题。 再把复杂的问题简单化！这样就更容易的去解决问题、处理问题！",
             
              "proName": "高等数学",
            
            },
            {
              "productLiabNameFormula": "本课程是为理工科各专业学生开设的一门重要必修基础课。课程的学习是为学生打好必要的物理基础，使学生初步学习科学的思维方法和研究问题方法。通过学习本课程，能够增强学生适应能力、开阔思路、激发探索和创新精神，提高人才科学素质的重要作用；课程不仅对学生在校学习起着十分重要的作用，而且对学生毕业后的工作和在工作中进一步学习新理论、新知识、新技术等都将产生深远的影响。 ",
              "proName": "大学物理",
             
            },
            {
              "productLiabNameFormula": "本课程的内容主要包括：行列式、矩阵、几何向量及其应用、 维向量与线性方程组、线性空间与欧氏空间、特征值与特征向量、二次曲面与二次型、线性变换",
              "proName": "线性代数与解析几何",
              
            },
            {
              "productLiabNameFormula": "掌握计算机的基础知识，熟悉使用python语言",
              "proName": "大学计算机",
             
            },
            {
              "productLiabNameFormula": "程序设计包括两个方面内容：程序设计方法和程序设计语言。本课程针对一年级学生初始接触程序设计概念的特点，结合一种典型的程序设计语言，系统地介绍基础数据结构、面向过程、面向模块和结构化程序设计的方法，以及排序等经典算法的思想和实现。结合上机实践，使学生对程序设计有一个比较全面的、系统的了解，为学生在程序设计方面打下一个良好的理论基础，使学生对程序设计的主要方法建立起初步的概念，并具备一定的运用程序设计方法解决实际问题的能力。",
              "proName": "程序设计基础",
             
            },
            {
              "productLiabNameFormula": "大学化学是一门面向电信、能动、机械等非化学化工类工科本科生开设的必修基础课程，主要介绍化学的基本原理和基本技术。研究内容主要包括：原子结构、分子结构、宏观物质及其聚集状态、化学热力学基础、化学反应平衡、水溶液中的平衡、电化学基础、化学反应速率以及表面现象和胶体等内容。课程内容与高中化学相衔接，在强调化学原理的同时，引入了一些应用性的化学前沿知识，体现了化学科学的基础性、科学性、逻辑性和应用性。",
              "proName": "大学化学",
             
            },
          ],
          "sort": "6"
        },
        {
          "liabName": "工科大类基础课程",
          "liabsList": [
            {
              "productLiabNameFormula": "工程制图课程是研究用正投影法绘制工程图样和解决空间几何问题的理论和方法的一门学科。工程图样是表达和交流技术思想的重要工具，是工程技术部门的一项重要技术文件，是一门工程技术基础课程",

              "proName": "工程制图",

            },
            {
              "productLiabNameFormula": "《金工实习Ⅰ》课程是工科专业学生了解机械加工生产过程、获得机械制造基本知识、培养实践动手能力的实践性教学环节，是大学本科教学计划内的必修课程。 本课程是一门实践性的技术基础课，涉及机械制造冷、热加工和现代数控加工等多个工种内容，是培养复合型人才和建立多学科知识结构的重要基础课，也为其它课程的学习奠定了必备的知识与实践基础。",

              "proName": "金工实习",

            }
          ],
          "sort": "6"
        },
        {
          "liabName": "专业大类基础课程",
          "liabsList": [
            {
              "productLiabNameFormula": "本课程采用美国大学原文教材进行双语教学。课程的目的是要培养他们的数据抽象能力，学会分析研究计算机加工的数据结构的特性，以便为应用涉及的数据选择适当的逻辑结构、存储结构及实现应用的相应算法，并初步掌握分析算法的时间和空间复杂度的技术。主要介绍预备知识、基本数据结构、排序和检索、应用与高级话题等；结合实际问题分析，加深对所学知识的理解，并为后续课程和未来的工程实践打下良好的基础。",

              "proName": "数据结构",

            },
            {
              "productLiabNameFormula": "电路模型和电路定律、电阻电路的等效变换和一般分析、电路定理、含有运算放大器的电阻电路、一阶和二阶电路的时域分析、正弦稳态电路分析的相量法、含有耦合电感的电路、频率响应、三相电路、非正弦周期电流电路分析、线性电路复频域分析、二端口网络、非线性电路简介等",

              "proName": "电路",

            },
            {
              "productLiabNameFormula": "本课程首先介绍数制与编码、逻辑代数基础和逻辑门电路等相关基础知识与相关理论；其次给出组合逻辑电路的描述、分析和设计方法，介绍了MSI译码器、编码器、多路选择器、比较器和加法器及其应用；然后在介绍各种触发器的基础上，给出同步时序电路的分析与设计的步骤和方法，介绍MSI计数器、存储器和节拍分配器及其应用，给出脉冲异步时序逻辑电路的分析与设计的前提条件和方法；最后全面介绍使用PLD器件的基本原理和设计逻辑电路的方法，使用硬件描述语言VHDL进行小型控制器设计的一般步骤与方法，并使学生通过实验真正能够掌握数字系统分析与设计的方法。",

              "proName": "数字逻辑电路",

            },
            {
              "productLiabNameFormula": "模拟电子技术基础是电子技术方面入门性质的技术基础课。使学生获得基本理论、基本知识和基本技能，培养学生分析和解决问题的能力，为后续相关课程的学习打好基础。主要内容：半导体二极管、晶体管、场效应管及其放大电路、集成运算放大器、负反馈放大电路、信号运算电路、信号检测与处理电路、信号发生器、功率放大器、直流稳压电源等",

              "proName": "模拟电子技术",

            }
          ],
          "sort": "6"
        },
        {
          "liabName": "门类学科基础课程",
          "liabsList": [
            {
              "productLiabNameFormula": "离散数学是现代数学的一个重要分支，是计算机科学和信息科学基础理论的核心课程。它充分描述了计算机科学和信息科学的离散性特点，是随着计算机科学和信息科学的发展而逐步建立起来的新兴的基础性学科。 离散数学课程内容有三部分： 集合论、代数系统、图论。 1.集合论中着重讲述集合、关系和函数。 2.代数系统讲述半群、群、环、域，以及格与布尔代数的相关内容。 3.图论重点介绍点、边、路、圈，最短路、Euler图、Hamilton图、二分图、平面图、树等内容。 从事计算机科学和信息科学工作的学生在掌握了本课程的基本理论和方法之后，将为他们更进一步的学习、实际工作、理论研究和分析，都奠定一个坚实的理论基础。",

              "proName": "离散数学",

            },
            {
              "productLiabNameFormula": "《金工实习Ⅰ》课程是工科专业学生了解机械加工生产过程、获得机械制造基本知识、培养实践动手能力的实践性教学环节，是大学本科教学计划内的必修课程。 本课程是一门实践性的技术基础课，涉及机械制造冷、热加工和现代数控加工等多个工种内容，是培养复合型人才和建立多学科知识结构的重要基础课，也为其它课程的学习奠定了必备的知识与实践基础。",

              "proName": "概率论与随机过程",

            },
            {
              "productLiabNameFormula": " 本课程通过介绍一些典型的数学建模的方法和典型的数学建模实例，使学生掌握建立数学模型的一般步骤，具备建立数学模型的初步技能。 ",

              "proName": "数学建模",

            },
            {
              "productLiabNameFormula": "课程主要学习内容包括：凸集和凸函数的概念及判定、无约束优化问题求解、等式及不等式优化问题求解及优化理论及方法在支撑向量机、稀疏表达及优化、参数估计等方面的应用专题。课程主要形式包括教师讲授、学生报告以及课程实验等。",

              "proName": "优化方法基础",

            }
          ],
          "sort": "6"
        },
        {
          "liabName": "专业选修课程(我可能选择的)",
          "liabsList": [
            {
              "productLiabNameFormula": "本课程系统讲述面向对象的编程思想和方法，以及如何运用面向对象编程语言C 进行程序设计。通过学习该课程，可以使学生掌握面向对象中封装、抽象、继承和多态的概念，熟练运用面向对象的思维方法来分析和解决问题，并提高算法设计的能力。",

              "proName": "面向对象程序设计",

            },
            {
              "productLiabNameFormula": "该课程是计算机专业学生必修的核心课程，通过介绍基础知识、80X86计算机组织、80X86寻址方式和指令系统、汇编语言程序格式、循环与分支程序设计、子程序结构、高级汇编语言技术、输入输出与中断程序设计、BIOS/DOS中断调用、模块化程序设计技术等基本内容，使学生掌握汇编语言程序设计的方法和技巧，正确运用BIOS和DOS中断等，熟悉汇编语言程序上机操作与调试技术，为学生从事计算机领域研究与应用打下基础。 ",

              "proName": "汇编语言",

            },
            {
              "productLiabNameFormula": "本课程面向来自其他计算机科学和工程领域而对人工智能有求知欲望的开发人员、学生或业界专业人士。",

              "proName": "人工智能",

            },
            {
              "productLiabNameFormula": "本课程主要内容包括计算机图形学的研究内容、发展与应用，图形输入输出设备，图形显示原理，图形软件标准，基本图形生成算法，图形几何变换与裁剪，自由曲线和曲面，三维实体造型，分形几何造型，分形艺术，隐藏面消除，光照模型，颜色模型，光线跟踪，纹理细节模拟，常用的计算机动画技术和软件等。 在学期期末时按课程要求进行运动，提高学生对计算机图形学知识的了解与运用技巧同时通过此次课程设计提高动手实践能力与学习分析能力这就是本次的课程设计的目的。",

              "proName": "计算机图形学",

            },
            {
              "productLiabNameFormula": "了解计算机网络与信息安全的相关原理、主要概念、发展和应用等。了解加密算法及密钥管理(PKI/CA)，包括常见的密钥算法、公钥算法和Hash算法。熟悉各种常见网络攻击与防护技术，掌握常见的网络安全协议及其应用，掌握网络安全管理技术，了解常用的网络安全设备及其配置、管理和应用，能够进行网络安全分析、设计与开发管理。 通过实验，深入了解网络攻击技术、加密算法的应用、公钥基础设施及CA的作用、主要网络安全协议的应用、网络安全设备的应用等。",

              "proName": "网络与信息安全",

            },
            {
              "productLiabNameFormula": "要求借鉴工程化思想，用系统化、科学化的原则与方法，进行计划、开发、测试与维护计算机软件的有关技术及管理方法。 对于应用型本科层次，课程的学习目标定位于要求学生注重软件过程迭代与开发规范，能够在特定开发环境下采取最佳的实践技术及方法，设计与实现出中小（微）规模的软件（应用）系统，提高软件开发效率。",

              "proName": "软件工程",

            },
            {
              "productLiabNameFormula": "科学计算可视化，智能图像处理与分析、自然语言处计算机动画",

              "proName": "计算机动画与科学可视化",

            },
          ],
          "sort": "6"
        },

        {
          "liabName": "专业核心课程",
          "liabsList": [
            {
              "productLiabNameFormula": "计算机科学与技术概论》以计算技术与计算机的发展史为主线,介绍各发展阶段的计算需求以及为适应这样的需求所采用的主要计算技术、计算方法、关键人物及贡献,由此勾画出计算学科的基本轮廓,并分析了目前计算技术中存在的问题,介绍计算及计算机未来的发展方向。",

              "proName": "计算机科学技术导论",

            },
            {
              "productLiabNameFormula": "计算机组成课程的一个主要目标就是要让学生了解计算机的基本组成和工作原理，包括计算机硬件的基本架构、组成部件及其运作机制，以及计算机硬件与软件的相互关系。 ",

              "proName": "计算机组成",

            },
            {
              "productLiabNameFormula": "本课程是计算机科学与技术专业的学科基础必修课，可以作为其他计算机类专业的选修课，属于系统软件技术系列。旨在继程序设计、数据结构与算法、计算机组成原理等课程后，引导学生在计算机系统上级再认识操作系统中的基本概念、基本理论、基本方法、主要功能及实现技术，理解多用户、多任务操作系统的运行机制，系统资源管理的策略和方法，在系统软件级上使学生系统科学地受到分析问题和解决问题的训练，从而具备操作系统分析、设计、开发的能力，进一步增强其计算思维、程序设计与实现、算法设计与分析、计算机系统等四大专业基本能力。",

              "proName": "操作系统原理",

            },
            {
              "productLiabNameFormula": "《编译原理》课程是计算机科学与技术专业的必修课程。本课程主要介绍程序设计语言编译程序构造的基本原理和设计方法，包括：编译程序概述、高级语言及其语法描述、词法分析、语法分析、属性文法和语法制导翻译、语义分析和中间代码产生、符号表、运行时存储空间组织、优化、目标代码生成等。",

              "proName": "形式语言与编译",

            },
            {
              "productLiabNameFormula": "本课程按照计算机网络体系结构的层次模型，在介绍计算机网络的基本概念和历史的基础上，按照自上而下的次序，以Internet主要协议为例系统地阐述了各层次的主要服务、工作原理、常用技术和重要协议，包括应用层、传输层、网络层、数据链路层和物理层，最后讲述网络安全和未来网络前沿的原理和技术。",

              "proName": "计算机网络原理",

            },
            {
              "productLiabNameFormula": "本课程围绕如何设计和操作数据库，系统地讲述了数据库系统的基本概念；SQL语句；数据库的安全性和完整性；关系数据库规范化理论以及数据库设计等知识。同时通过课堂讲授、课程实验相结合的方式 ，使学生系统地掌握如何设计一个合理的、规范的数据库，能熟练使用SQL语言在某一个数据库管理系统上进行数据库检索和操作，掌握数据库安全性和完整性的基本概念和基本方法。培养学生具有设计数据库模式以及开发数据库应用系统的基本能力。",

              "proName": "数据库原理",

            },
            {
              "productLiabNameFormula": "算法分析与设计是一门理论性与实践性兼顾的课程，主要介绍算法分析与设计的基本理论、思想和方法，介绍枚举、递推、贪心、分治、动态规划、回溯、分支限界、网络流、图算法、随机算法等算法设计策略和分析方法。从各个应用领域的大量实际问题出发，分析问题的性质，建立合理的数学模型，选择合适的数据结构，设计结构清晰、正确高效的算法解决之，分析比较算法的性能以及提高算法性能的技巧，培养初步的算法设计与分析能力，培养计算思维和分析解决实际问题的能力，提高学生的科研素质和创新能力。通过实验实践进一步培养算法实现、调试测试和结果分析的基本能力，强化专业核心意识和职业素养，为学习其他专业课奠定扎实的基础。",

              "proName": "算法分析与设计",

            },
          ],
          "sort": "6"
        },
     
     

      ],
    }

    let xmind = new Xmind({ id: '#canvas', data: data })
    let img = document.querySelector('#img')
    img.src = xmind.getBase64Url()
  </script>
</body>

</html>
